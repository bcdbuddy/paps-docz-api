---
name: Créer une tâche
title: Créer une tache avec Paps API
---

# Créer une tache avec Paps API

Il existe différents types de tâches peuvent être créées à à travers l'API en fonction du flux de travail que vous avez sélectionné dans votre compte, par exemple - pick & tâche de livraison, la tâche de rendez-vous, etc.

> Toute création de tache doit être faite avec un argument `apiKey` que vous pouvez 
> obtenir [ici](/#commencez-à-utiliser-paps-api) sur la page d'acceil. Exemple:

`GET https://api.paps.sn/api/v1/task?api_key=59a242vv8830z22zee983930129892b&getId=2231233`

## Créer une tâche de ramassage

Cette API est utilisée pour créer une tâche de pick - up.L'url de base qu'on va utilisé est : `POST /api/v1/createPickup`.

```json
{
	"apiKey": "5462658cf0110b1e5f572a6b1410214519e7c3f222de7d3e5a1a",
	"jobPickupAddress": "Fann Hock, Dakar, Sénégal",
	"timezone": "0",
	"jobPickupDatetime": "2018-10-23 00:00:00"
}
```

On vient de créer une tâche de pickup.Et la réponse de confirmation que tout s'est bien passé est:

```json
{
  "payload": {
		"message": "The task has been created.",
		"status": 200,
		"data": {
      "job_id": 22694356,
      "job_hash": "25fcca51819686e214e910c9836764d1",
      "job_pickup_address": "Fann Hock, Dakar, Sénégal",
      "job_token": "2269435615403221690882229",
      "tracking_link": "http://tukn.tk/o1ZYf",
      "pickupAddressNotFound": false,
      "deliveryAddressNotFound": false
		}
	} 
}
```

## Créer une tâche de livraison


Cette API est utilisée pour créer une tâche de livraison.L'url de base qu'on va utilisé est : `POST /api/v1/createDelivery`.

```json
{
	"customerAddress": "Ouest Foire, Dakar, Sénégal",
	"jobDeliveryDatetime": "2018-10-24 00:00:00",
	"timezone": "0"
}
``` 

Ceci crée une tâche de livraison et nous retourne un message s'il n'y a pas d'erreurs.

```json
{
	"payload": {
		"message": "The task has been created.",
		"status": 200,
		"data": {
			"job_id": 22726428,
			"job_hash": "26a453fdc6dd79eda5a0fb994a16614f",
			"customer_address": "Ouest Foire, Dakar, Sénégal",
			"job_token": "2272642815403757852833068",
			"tracking_link": "https://k7ggd.app.goo.gl/SGP49G",
			"pickupAddressNotFound": false,
			"deliveryAddressNotFound": false
		}
	}
}
```

## Créer une tâche de ramassage et de livraison


L'url de base qu'on va utilisé est : `POST /api/v1/createTask`. C'est la methode utilisée
pour envoyer les informations du pickup et delivery. Et les
informations sont contenues dans un tableau d'objet et sont envoyées
en forme JSON.

```json
{
	"jobPickupName": "Moussa",
	"customerName": "fanta",
	"jobPickupAddress":"Fadia, Dakar, Sénégal",
	"customerAddress": "Médina, Dakar, Sénégal",
	"jobPickupDatetime": "2018-10-23 00:00:00",
	"jobDeliveryDatetime": "2018-10-23 00:00:00",
	"jobDescription": "TEST -- Commande venant du site web",
	"autoAssignment": "0",
	"timezone": "0"
}
```

Si la tâche est créée avec succès on aura un message de ce type :

```json 
{
	"message": "The task has been created.",
	"status": 200,
	"data": "job_id": 21955359,
	"pickup_job_id": 21955359, 
	"delivery_job_id": 21955360,
	"job_hash": "c1c451ccf5b935751b1e18aeb8275049",
	"customer_address": "Médina, Dakar, Sénégal",
	"job_pickup_name": "Moussa", 
	"job_pickup_address": "Fadia,Dakar, Sénégal",
	"job_token": "2195535915390829560960041",
	"pickup_tracking_link": "https://k7ggd.app.goo.gl/abDNj",
	"delivery_tracing_link": "https://k7ggd.app.goo.gl/Ey1kL",
	"pickupAddressNotFound": false, 
	"deliveryAddressNotFound": false
}
```

### Gestion des erreurs de la création d'une tâche

Lorsque votre commande ne se passe comme prévu, l'API répondra avec un code d'erreur autre que 200 dans la réponse.

```bash
{
  200 - OK: Tout est allé comme prévu.
  304 - Non modifié:ressources n'a pas été mis à jour depuis la date prévue.
  400 - Bad Request: Tu as faitquelque chose de mal. Souvent, un argument ou paramètre manquant.
  401 - Non autorisé: L'authentification est incorrecte.
  404 -Not Found 
  429 - Trop de demandes 
  500 - Erreur interne du serveur: Nous avons eu un traitement de la demande problème. 
  503- Service Unavailable: Réessayez plus tard.
}
```

##### Exemple d'erreur de syntaxe

Ici par exemple, nous avons volontairement omis `timezone= 0` dans la requête `POST /api/v1/createTask` avec les paramètres ci-dessous, ce qui cause un code d'erreur de type `401`;

```json
{
	"jobPickupName": "Moussa",
	"customerName": "fanta",
	"jobPickupAddress":"Fadia, Dakar, Sénégal",
	"customerAddress": "Médina, Dakar, Sénégal",
	"jobPickupDatetime": "2018-10-23 00:00:00",
	"jobDeliveryDatetime": "2018-10-23 00:00:00",
	"jobDescription": "TEST -- Commande venant du site web",
	"autoAssignment": "0",
}
```
